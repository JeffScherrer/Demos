Bridge.define("LiveApp.App",{statics:{MAX_KEYSTROKES:10,INTERVAL_DELAY:1e3,JS_HEADER_LINES:13,csEditor:null,jsEditor:null,keystrokes:0,interval:0,hash:null,config:{init:function(){Bridge.ready(this.main);$("#btnTranslate").on("click",this.translate);$("#btnRun").on("click",this.hookRunEvent);$("#offcanvas-toggle, .offcanvas-close-button, .overlay").on("click",this.offCanvasMenu)}},main:function(){LiveApp.App.initEditors();LiveApp.App.setEditorSize(null);Bridge.global.onresize=LiveApp.App.setEditorSize;LiveApp.App.hash=Bridge.global.location.hash;LiveApp.App.loadExamples(Bridge.String.isNullOrEmpty(LiveApp.App.hash))},loadExamples:function(n){$.ajax({url:"https://api.github.com/gists/fc03fa0d97097d4ceabe",type:"GET",cache:!1,success:function(t){for(var i=t.files,h=Bridge.global.Object.keys(i),f=n?i[h[0]].raw_url.toString():"",c=$("#examples"),l=1,r,e,o,s,u=Bridge.getEnumerator(h);u.moveNext();)r=u.getCurrent(),e="#example"+(l++).toString(),n||LiveApp.App.hash!==e||(f=i[r].raw_url.toString()),$("<li>").attr("role","presentation").append(Bridge.merge(document.createElement("a"),{href:i[r].raw_url.toString(),text:LiveApp.App.formatExampleFilename(i[r].filename.toString()),title:e,onclick:LiveApp.App.loadExample})).appendTo(c);Bridge.String.isNullOrEmpty(f)||(o=n?"#example1":LiveApp.App.hash,LiveApp.App.loadFromGist(o,f),s=$("#examples > li > a[title='"+o+"']"),s.parent().addClass("active"),$("#filename").html(s.text()))}})},formatExampleFilename:function(n){var t=new RegExp("\\d\\.\\s(.*)").exec(n);return t!==null?t[1]:n},loadExample:function(n){n.preventDefault();LiveApp.App.loadFromGist($(this).attr("title"),$(this).attr("href"));$("#examples > li").removeClass("active");$(this).parent().addClass("active");$("#filename").html($(this).text())},loadFromGist:function(n,t){$.ajax({url:t,type:"GET",cache:!1,success:function(t){LiveApp.App.csEditor.setValue(t,-1);LiveApp.App.translate();Bridge.global.location.hash=n}})},initEditors:function(){var n=Bridge.global.ace;LiveApp.App.csEditor=n.edit("CsEditor");LiveApp.App.csEditor.renderer.setPadding(10);LiveApp.App.csEditor.renderer.setScrollMargin(13,13,13,13);LiveApp.App.csEditor.setTheme("ace/theme/terminal");LiveApp.App.csEditor.getSession().setMode("ace/mode/csharp");LiveApp.App.csEditor.setWrapBehavioursEnabled(!0);LiveApp.App.hookCsEditorInputEvent();LiveApp.App.jsEditor=n.edit("JsEditor");LiveApp.App.jsEditor.renderer.setPadding(10);LiveApp.App.jsEditor.renderer.setScrollMargin(13,13,13,13);LiveApp.App.jsEditor.setTheme("ace/theme/terminal");LiveApp.App.jsEditor.getSession().setMode("ace/mode/javascript");LiveApp.App.jsEditor.setValue("")},translate:function(){$("#status").attr("src","resources/images/loader.gif").show();LiveApp.App.progress("Compiling...");$.ajax({url:"TranslateHandler.ashx?ajax=1",type:"POST",cache:!1,data:{cs:LiveApp.App.csEditor.getValue()},success:function(n){if(LiveApp.App.progress(null),Bridge.cast(n.Success,Boolean))LiveApp.App.jsEditor.setValue(n.JsCode,-1),$("#hash").text(n.Hash.toString()),$("#status").attr("src","resources/images/check.png"),LiveApp.App.progress("Compiled successfully!");else{var t=LiveApp.App.getErrorMessage(n.ErrorMessage.toString());LiveApp.App.jsEditor.setValue(t.toString(),-1);$("#hash").text("");$("#status").attr("src","resources/images/error.png");LiveApp.App.progress("Finished with error(s)")}}})},getErrorMessage:function(n){var t=new RegExp("Line (\\d+), Col (\\d+)\\): (.*)","g").exec(n),r=n,i={v:0},u={v:0};return t!==null&&(Bridge.Int.tryParseInt(t[1],i,-2147483648,2147483647)&&(i.v=i.v-LiveApp.App.JS_HEADER_LINES),Bridge.Int.tryParseInt(t[2],u,-2147483648,2147483647),r=t[3]),Bridge.merge(new LiveApp.TranslateError,{setLine:i.v,setColumn:u.v,setMessage:r})},onInterval:function(){LiveApp.App.keystrokes>0&&(LiveApp.App.keystrokes=LiveApp.App.MAX_KEYSTROKES,LiveApp.App.onCsEditorInput())},onCsEditorInput:function(){Bridge.global.clearInterval(LiveApp.App.interval);LiveApp.App.keystrokes>=LiveApp.App.MAX_KEYSTROKES?(LiveApp.App.keystrokes=0,LiveApp.App.translate(),Bridge.global.location.hash=""):(LiveApp.App.keystrokes++,LiveApp.App.interval=Bridge.global.setInterval(LiveApp.App.onInterval,LiveApp.App.INTERVAL_DELAY))},hookCsEditorInputEvent:function(){$("#CsEditor").keyup(LiveApp.App.onCsEditorInput)},hookRunEvent:function(n){n.preventDefault();window.open("run.html?h="+$("#hash").text())},progress:function(n){var t=$("#progress");Bridge.String.isNullOrEmpty(n)?t.text(""):t.text(n)},setEditorSize:function(){var n=$("#masthead").outerHeight(),t=$("#title").outerHeight(),i=$(".code-description").outerHeight(),r=$(".site-footer").outerHeight(),u=window.innerHeight-(n+t+i+r+15);$(".ace_editor").css("height",u)},offCanvasMenu:function(n){n.preventDefault();$("#sidebar-offcanvas, .main-wrapper").toggleClass("active");$("body").toggleClass("offcanvas-open")}}});Bridge.define("LiveApp.TranslateError",{config:{properties:{Line:0,Column:0,Message:null}},toString:function(){return Bridge.String.format("// Line {0}, Col {1} : {2}",this.getLine().toString(),this.getColumn().toString(),this.getMessage())}})