Bridge.define("LiveBridgeBuilder.App",{statics:{MAX_KEYSTROKES:10,INTERVAL_DELAY:2e3,JS_HEADER_LINES:12,csEditor:null,jsEditor:null,keystrokes:0,interval:0,hash:null,config:{init:function(){Bridge.ready(this.main);$("#btnTranslate").on("click",this.translate);$("#btnRun").on("click",this.hookRunEvent)}},main:function(){LiveBridgeBuilder.App.initEditors();LiveBridgeBuilder.App.setEditorSize(null);Bridge.global.onresize=LiveBridgeBuilder.App.setEditorSize;LiveBridgeBuilder.App.hash=Bridge.global.location.hash;LiveBridgeBuilder.App.loadExamples(Bridge.String.isNullOrEmpty(LiveBridgeBuilder.App.hash));$(".has-tooltip").tooltip()},loadExamples:function(n){$.ajax({url:"https://api.github.com/gists/200263594a0d09a571b1",type:"GET",cache:!1,success:function(t){for(var i=t.files,o=Bridge.global.Object.keys(i),f=n?i[o[0]].raw_url.toString():"",s=$("#examples"),h=0,r,e,u=Bridge.getEnumerator(o);u.moveNext();)r=u.getCurrent(),e="example"+(h++).toString(),n||LiveBridgeBuilder.App.hash!=="#"+e||(f=i[r].raw_url.toString()),$("<li>").attr("role","presentation").append(Bridge.merge(document.createElement("a"),{href:i[r].raw_url.toString(),text:i[r].filename.toString(),title:e,onclick:LiveBridgeBuilder.App.loadExample})).appendTo(s);Bridge.String.isNullOrEmpty(f)||LiveBridgeBuilder.App.loadFromGist(n?"example0":LiveBridgeBuilder.App.hash,f)}})},loadExample:function(n){n.preventDefault();LiveBridgeBuilder.App.loadFromGist($(this).attr("title"),$(this).attr("href"))},loadFromGist:function(n,t){$.ajax({url:t,type:"GET",cache:!1,success:function(t){LiveBridgeBuilder.App.csEditor.setValue(t,-1);LiveBridgeBuilder.App.translate();Bridge.global.location.hash=n}})},initEditors:function(){var n=Bridge.global.ace;LiveBridgeBuilder.App.csEditor=n.edit("CsEditor");LiveBridgeBuilder.App.csEditor.setTheme("ace/theme/terminal");LiveBridgeBuilder.App.csEditor.getSession().setMode("ace/mode/csharp");LiveBridgeBuilder.App.csEditor.setWrapBehavioursEnabled(!0);LiveBridgeBuilder.App.hookCsEditorInputEvent();LiveBridgeBuilder.App.jsEditor=n.edit("JsEditor");LiveBridgeBuilder.App.jsEditor.setTheme("ace/theme/terminal");LiveBridgeBuilder.App.jsEditor.getSession().setMode("ace/mode/javascript");LiveBridgeBuilder.App.jsEditor.setValue("")},translate:function(){LiveBridgeBuilder.App.progress("Compiling...");$.ajax({url:"TranslateHandler.ashx?ajax=1",type:"POST",cache:!1,data:{cs:LiveBridgeBuilder.App.csEditor.getValue()},success:function(n){if(LiveBridgeBuilder.App.progress(null),Bridge.cast(n.Success,Boolean))LiveBridgeBuilder.App.jsEditor.setValue(n.JsCode,-1),$("#hash").text(n.Hash.toString()),LiveBridgeBuilder.App.progress("Compiled Successfully!");else{var t=LiveBridgeBuilder.App.getErrorMessage(n.ErrorMessage.toString());LiveBridgeBuilder.App.jsEditor.setValue(t.toString(),-1);$("#hash").text("");LiveBridgeBuilder.App.progress("Finished with error(s)")}}})},getErrorMessage:function(n){var t=new RegExp("Line (\\d+), Col (\\d+)\\): (.*)","g").exec(n),r=n,i={v:0},u={v:0};return t!==null&&(Bridge.Int.tryParseInt(t[1],i,-2147483648,2147483647)&&(i.v=i.v-LiveBridgeBuilder.App.JS_HEADER_LINES),Bridge.Int.tryParseInt(t[2],u,-2147483648,2147483647),r=t[3]),Bridge.merge(new LiveBridgeBuilder.TranslateError,{setLine:i.v,setColumn:u.v,setMessage:r})},onInterval:function(){LiveBridgeBuilder.App.keystrokes>0&&(LiveBridgeBuilder.App.keystrokes=LiveBridgeBuilder.App.MAX_KEYSTROKES,LiveBridgeBuilder.App.onCsEditorInput())},onCsEditorInput:function(){Bridge.global.clearInterval(LiveBridgeBuilder.App.interval);LiveBridgeBuilder.App.keystrokes>=LiveBridgeBuilder.App.MAX_KEYSTROKES?(LiveBridgeBuilder.App.keystrokes=0,LiveBridgeBuilder.App.translate()):(LiveBridgeBuilder.App.keystrokes++,LiveBridgeBuilder.App.interval=Bridge.global.setInterval(LiveBridgeBuilder.App.onInterval,LiveBridgeBuilder.App.INTERVAL_DELAY))},hookCsEditorInputEvent:function(){$("#CsEditor").keyup(LiveBridgeBuilder.App.onCsEditorInput)},hookRunEvent:function(n){n.preventDefault();window.open("run.html?h="+$("#hash").text())},progress:function(n){var t=$("#progress");Bridge.String.isNullOrEmpty(n)?t.text(""):t.text(n)},setEditorSize:function(){var n=$("#masthead").outerHeight(),t=$(".titlebar").outerHeight(),i=$(".code-description").outerHeight(),r=$(".site-footer").outerHeight(),u=window.innerHeight-(n+t+i+r+30);$(".ace_editor").css("height",u)}}});Bridge.define("LiveBridgeBuilder.TranslateError",{config:{properties:{Line:0,Column:0,Message:null}},toString:function(){return Bridge.String.format("// Line {0}, Col {1} : {2}",this.getLine().toString(),this.getColumn().toString(),this.getMessage())}})